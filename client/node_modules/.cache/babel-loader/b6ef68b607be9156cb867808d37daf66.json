{"ast":null,"code":"import _toConsumableArray from\"C:/MERN Projects/BombParty/bombparty/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:/MERN Projects/BombParty/bombparty/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/MERN Projects/BombParty/bombparty/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/MERN Projects/BombParty/bombparty/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/MERN Projects/BombParty/bombparty/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{SocketContext}from'../context/socket';import Message from'./Messages/Message';import'./Chat.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Chat=/*#__PURE__*/function(_React$Component){_inherits(Chat,_React$Component);var _super=_createSuper(Chat);function Chat(){var _this;_classCallCheck(this,Chat);_this=_super.call(this);_this.nickname=JSON.parse(localStorage.getItem('settings')).nickname;_this.currentDate=new Date();_this.gameStartMessage=function(seconds){var gameStartInterval=setInterval(function(){if(seconds>0){var message={time:seconds,type:'gameStart'};_this.setState({messageList:[].concat(_toConsumableArray(_this.state.messageList),[message])});}// clears on game start\nelse{clearInterval(gameStartInterval);var _message={time:0,type:'gameStart'};_this.setState({messageList:[].concat(_toConsumableArray(_this.state.messageList),[_message])});}seconds--;},1000);};_this.handleChange=function(e){_this.setState({text:e.target.value});};_this.onSubmitMessage=function(e){if(e.keyCode===13&&e.shiftKey===false&&/\\S/.test(_this.state.text)){e.preventDefault();var data={name:_this.nickname,time:_this.currentDate.timeNow(),type:\"text\",text:_this.state.text};_this.context.emit('message',data);// add message and reset input\n_this.setState({messageList:[].concat(_toConsumableArray(_this.state.messageList),[data]),text:\"\"});}};_this.state={text:\"\",messageList:[],chatStatus:false};// eslint-disable-next-line \nDate.prototype.timeNow=function(){return(this.getHours()<10?\"0\":\"\")+this.getHours()+\":\"+(this.getMinutes()<10?\"0\":\"\")+this.getMinutes();};return _this;}_createClass(Chat,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var message={name:this.nickname,time:this.currentDate.timeNow(),type:'connection'};// on user connection to chat\nthis.context.on('user_connected',function(){_this2.context.emit('user_joined_sent',message);});this.context.on('user_joined_received',function(data){_this2.setState({messageList:[].concat(_toConsumableArray(_this2.state.messageList),[data.data_msg])});});this.context.on('user_disconnect',function(data){var message={name:data.user_name,time:_this2.currentDate.timeNow(),type:'disconnection'};//ðŸ’¥ ðŸŒŠ\n_this2.setState({messageList:[].concat(_toConsumableArray(_this2.state.messageList),[message])});});// on message received\nthis.context.on('message_received',function(data){_this2.setState({messageList:[].concat(_toConsumableArray(_this2.state.messageList),[data])});});// starts game \nthis.context.on('Starting Game',function(){return _this2.gameStartMessage(3);});// changes chat name\nthis.context.on('updatechatnick',function(data){_this2.nickname=data;localStorage.setItem('settings',JSON.stringify({nickname:data}));});}// handle game Start message\n},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"Chat\",style:this.state.chatStatus===false?{display:'flex'}:{width:'2%'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"chat-option\",onClick:function onClick(){return _this3.setState({chatStatus:!_this3.state.chatStatus});},children:[\" \",String.fromCharCode(8592)]}),/*#__PURE__*/_jsx(\"div\",{className:\"messages\",style:this.state.chatStatus===false?{display:'block'}:{display:'none'},children:this.state.messageList.map(function(message,i){return/*#__PURE__*/_jsx(Message,{message:message},i);})}),/*#__PURE__*/_jsx(\"div\",{className:\"input\",style:this.state.chatStatus===false?{display:'block'}:{display:'none'},children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u05D4\\u05E7\\u05DC\\u05D3/\\u05D9 \\u05D4\\u05D5\\u05D3\\u05E2\\u05D4\",\"data-placeholder-text\":\"typeHereToChat\",maxLength:\"40\",value:this.state.text,onChange:this.handleChange,onKeyDown:this.onSubmitMessage})})]});}}]);return Chat;}(React.Component);Chat.contextType=SocketContext;export default Chat;","map":{"version":3,"sources":["C:/MERN Projects/BombParty/bombparty/client/src/components/Chat/Chat.js"],"names":["React","SocketContext","Message","Chat","nickname","JSON","parse","localStorage","getItem","currentDate","Date","gameStartMessage","seconds","gameStartInterval","setInterval","message","time","type","setState","messageList","state","clearInterval","handleChange","e","text","target","value","onSubmitMessage","keyCode","shiftKey","test","preventDefault","data","name","timeNow","context","emit","chatStatus","prototype","getHours","getMinutes","on","data_msg","user_name","setItem","stringify","display","width","String","fromCharCode","map","i","Component","contextType"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { SocketContext } from '../context/socket';\r\nimport Message from './Messages/Message'\r\nimport './Chat.css'\r\n\r\nclass Chat extends React.Component {\r\n    static contextType = SocketContext;\r\n    nickname = JSON.parse(localStorage.getItem('settings')).nickname;\r\n    currentDate = new Date();\r\n    constructor() {\r\n      super();\r\n      this.state = {\r\n          text: \"\",\r\n          messageList: [],\r\n          chatStatus: false,\r\n        };\r\n    // eslint-disable-next-line \r\n    Date.prototype.timeNow = function () {\r\n        return ((this.getHours() < 10)?\"0\":\"\") + this.getHours() +\":\"+ ((this.getMinutes() < 10)?\"0\":\"\") + this.getMinutes();\r\n        }        \r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        const message = {\r\n            name : this.nickname,\r\n            time : this.currentDate.timeNow(),\r\n            type: 'connection',\r\n        }\r\n    // on user connection to chat\r\n    this.context.on('user_connected',() => {\r\n        this.context.emit('user_joined_sent',message);\r\n    })\r\n\r\n    this.context.on('user_joined_received', (data) => {\r\n        this.setState({messageList: [...this.state.messageList, data.data_msg]})\r\n    }) \r\n    this.context.on('user_disconnect',(data) => {\r\n            const message = {\r\n                name : data.user_name,\r\n                time : this.currentDate.timeNow(),\r\n                type: 'disconnection',\r\n            }\r\n            //ðŸ’¥ ðŸŒŠ\r\n            this.setState({messageList: [...this.state.messageList, message]})\r\n            }) \r\n    // on message received\r\n    this.context.on('message_received',data => { \r\n        this.setState({messageList: [...this.state.messageList, data]})\r\n    })\r\n    // starts game \r\n    this.context.on('Starting Game', () => this.gameStartMessage(3));\r\n    // changes chat name\r\n    this.context.on('updatechatnick', (data) => {\r\n        this.nickname = data; localStorage.setItem('settings',JSON.stringify({nickname:data}))\r\n    })\r\n}\r\n        // handle game Start message\r\n    gameStartMessage = (seconds) => {\r\n        const gameStartInterval = setInterval(()=>{\r\n            if(seconds > 0)\r\n            {\r\n            const message = {\r\n                time: seconds,\r\n                type: 'gameStart',\r\n            }\r\n            this.setState({messageList: [...this.state.messageList, message]});\r\n        }\r\n            // clears on game start\r\n            else\r\n            {\r\n                clearInterval(gameStartInterval);\r\n                const message = {\r\n                    time:0,\r\n                    type: 'gameStart',\r\n                }\r\n                this.setState({messageList: [...this.state.messageList, message]});\r\n            }\r\n            seconds--;\r\n         }, 1000);\r\n    }\r\n    // handles on change input\r\n    handleChange = (e) => {\r\n        this.setState({text: e.target.value})\r\n    }\r\n    onSubmitMessage = (e) => {\r\n        if(e.keyCode === 13 && e.shiftKey === false && (/\\S/.test(this.state.text))) {\r\n            e.preventDefault();\r\n            const data = {\r\n                name : this.nickname,\r\n                time : this.currentDate.timeNow(),\r\n                type: \"text\",\r\n                text: this.state.text\r\n            };\r\n            this.context.emit('message',data);\r\n            // add message and reset input\r\n            this.setState({messageList: [...this.state.messageList, data], text: \"\"})\r\n          }\r\n        }\r\n    render() {\r\n    return (\r\n        <div className=\"Chat\" style={this.state.chatStatus === false ? {display: 'flex'} : {width:'2%'}}>\r\n            <button className=\"chat-option\" onClick={() => this.setState({chatStatus: !this.state.chatStatus})}> {String.fromCharCode(8592)}</button>\r\n        <div className=\"messages\" style={this.state.chatStatus === false ? {display: 'block'} : {display:'none'}}>\r\n        {this.state.messageList.map((message, i) => {\r\n          return <Message message={message} key={i} />;\r\n        })}\r\n        </div>\r\n            <div className=\"input\" style={this.state.chatStatus === false ? {display: 'block'} : {display:'none'}}>\r\n            <textarea placeholder=\"×”×§×œ×“/×™ ×”×•×“×¢×”\" data-placeholder-text=\"typeHereToChat\" maxLength=\"40\" value={this.state.text} onChange={this.handleChange} onKeyDown={this.onSubmitMessage} ></textarea>\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n}\r\n    \r\nexport default Chat;\r\n"]},"metadata":{},"sourceType":"module"}