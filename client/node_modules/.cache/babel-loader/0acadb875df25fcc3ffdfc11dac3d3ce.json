{"ast":null,"code":"var _jsxFileName = \"C:\\\\MERN Projects\\\\BombParty\\\\bombparty\\\\client\\\\src\\\\components\\\\Chat\\\\Chat.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { SocketContext } from '../context/socket';\nimport Message from './Messages/Message';\nimport './Chat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Chat extends React.Component {\n  constructor() {\n    super();\n\n    this.handleChange = e => {\n      setValue(e.target.value);\n    };\n\n    this.onSubmitMessage = e => {\n      if (e.keyCode === 13 && e.shiftKey === false && /\\S/.test(value)) {\n        e.preventDefault();\n        const data = {\n          name: \"איתי זיו\",\n          time: currentDate.timeNow(),\n          type: \"text\",\n          text: value\n        };\n        socket.emit('message', data);\n        setMessage([...messageList, data]); // resets input\n\n        setValue(\"\");\n      }\n    };\n\n    this.state = {\n      value: \"\",\n      messageList: []\n    };\n\n    const _currentDate = new Date();\n\n    Date.prototype.timeNow = function () {\n      return (this.getHours() < 10 ? \"0\" : \"\") + this.getHours() + \":\" + (this.getMinutes() < 10 ? \"0\" : \"\") + this.getMinutes();\n    };\n  }\n\n  componentDidMount() {\n    // on user connection to chat\n    socket.on('user_joined', data => {\n      socket.emit('message', {\n        name: socket.id,\n        time: currentDate.timeNow(),\n        type: 'connection'\n      });\n    });\n    socket.on('user_disconnect', data => {\n      socket.emit('message', {\n        name: socket.id,\n        time: currentDate.timeNow(),\n        type: 'disconnection'\n      });\n    }); // on message received\n\n    socket.on('message_received', data => {\n      setMessage([...messageList, data]);\n    });\n  } // handles on change input\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Chat\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages\",\n        children: messageList.map((message, i) => {\n          return /*#__PURE__*/_jsxDEV(Message, {\n            message: message\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 18\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input\",\n        children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: \"\\u05D4\\u05E7\\u05DC\\u05D3/\\u05D9 \\u05D4\\u05D5\\u05D3\\u05E2\\u05D4\",\n          \"data-placeholder-text\": \"typeHereToChat\",\n          maxLength: \"150\",\n          value: value,\n          onChange: handleChange,\n          onKeyDown: onSubmitMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nChat.contextType = SocketContext;\nexport default Chat;","map":{"version":3,"sources":["C:/MERN Projects/BombParty/bombparty/client/src/components/Chat/Chat.js"],"names":["React","useState","useContext","useEffect","SocketContext","Message","Chat","Component","constructor","handleChange","e","setValue","target","value","onSubmitMessage","keyCode","shiftKey","test","preventDefault","data","name","time","currentDate","timeNow","type","text","socket","emit","setMessage","messageList","state","Date","prototype","getHours","getMinutes","componentDidMount","on","id","render","map","message","i","contextType"],"mappings":"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","sourcesContent":["import React, { useState,useContext,useEffect } from 'react';\r\nimport { SocketContext } from '../context/socket';\r\nimport Message from './Messages/Message'\r\nimport './Chat.css'\r\n\r\nclass Chat extends React.Component {\r\n    static contextType = SocketContext;\r\n    constructor() {\r\n      super();\r\n      this.state = {\r\n          value: \"\",\r\n          messageList: [],\r\n        };\r\n    const currentDate = new Date();\r\n    Date.prototype.timeNow = function () {\r\n        return ((this.getHours() < 10)?\"0\":\"\") + this.getHours() +\":\"+ ((this.getMinutes() < 10)?\"0\":\"\") + this.getMinutes();\r\n        }        \r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n    // on user connection to chat\r\n    socket.on('user_joined',(data) => {\r\n            socket.emit('message',{\r\n                name : socket.id,\r\n                time : currentDate.timeNow(),\r\n                type: 'connection',\r\n            });\r\n            })    \r\n    socket.on('user_disconnect',(data) => {\r\n                socket.emit('message',{\r\n                    name : socket.id,\r\n                    time : currentDate.timeNow(),\r\n                    type: 'disconnection',\r\n                });\r\n                }) \r\n    // on message received\r\n    socket.on('message_received',data => { \r\n        setMessage([...messageList, data])\r\n    })}\r\n\r\n    // handles on change input\r\n    handleChange = (e) => {\r\n        setValue(e.target.value);\r\n    }\r\n    onSubmitMessage = (e) => {\r\n        if(e.keyCode === 13 && e.shiftKey === false && (/\\S/.test(value))) {\r\n            e.preventDefault();\r\n            const data = {\r\n                name : \"איתי זיו\",\r\n                time : currentDate.timeNow(),\r\n                type: \"text\",\r\n                text: value\r\n            };\r\n            socket.emit('message',data);\r\n            setMessage([...messageList, data])\r\n            // resets input\r\n            setValue(\"\")\r\n          }\r\n        }\r\n    render() {\r\n    return (\r\n        <div className=\"Chat\">\r\n        <div className=\"messages\">\r\n        {messageList.map((message, i) => {\r\n          return <Message message={message} key={i} />;\r\n        })}\r\n        </div>\r\n            <div className=\"input\">\r\n            <textarea placeholder=\"הקלד/י הודעה\" data-placeholder-text=\"typeHereToChat\" maxLength=\"150\" value={value} onChange={handleChange} onKeyDown={onSubmitMessage} ></textarea>\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n}\r\n    \r\nexport default Chat;\r\n"]},"metadata":{},"sourceType":"module"}